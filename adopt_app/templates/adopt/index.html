{% extends 'adopt/base2.html' %}

{% block content %}



<div class="big-banner">


    <nav class="navbar navbar-expand-lg navbar-white">
        <a class="navbar-brand" href="{% url 'home' %}">PawPals</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
            aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="{% url 'home' %}">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'search' %}">Find a Dog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'shelters' %}">Shelters</a>
                </li>
            </ul>
        </div>
        <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
            </ul>
            <div class="navbar-nav ml-auto">
                <a class="nav-link" href="{% url 'about' %}">About Us</a>
                {% if logged_user %}
                <a class="nav-link" href="{% url 'user_profile' %}">Profile</a>
                <a class="nav-link" href="{% url 'favorites' logged_user.id%}">Favorites</a>

                <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
                {% else %}
                <a class="nav-link" href="{% url 'login' %}">Log In</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <br>

    <div class="row">
        <div class="col-sm-1"></div>

        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title text-center">So, who are you looking for in a <br>soul-mate?</h5>
                    <form action="">
                        <div class="form-group">
                            <select class="custom-select" name="size" id="size">
                                <option selected="" value="">Pick a Size</option>
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                        </div>
                        <div class="form-group">   
                            <select class="custom-select" name="breed" id="breed">
                                <option selected="" value="">Pick a Breed</option>
                                <option value="1">run</option>
                                <option value="2">a</option>
                                <option value="3">loop</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select class="custom-select" name="age" id="age">
                                <option value="">Pick an Age Range</option>
                                <option value="baby">Puppy</option>
                                <option value="young">Adolescent</option>
                                <option value="adult">Adult</option>
                                <option value="senior">Senior</option>
                            </select>
                        </div>
                        <div class="row">
                            <div class="form-group col-6">
                                <select name="distance" class="custom-select" id="distance">
                                    <option selected="" value="">How far away?</option>
                                    <option value="5">5 miles from</option>
                                    <option value="10">10 miles from</option>
                                    <option value="25">25 miles from</option>
                                    <option value="50">50 miles from</option>
                                    <option value="100">100 miles from</option>
                                </select>
                            </div>
                            <div class="form-group col-6">
                                <input type="text" placeholder="Zip Code" class="form-control" id="location">
                            </div>
                        </div>
                        <input type="submit" value="Let's Go!" class="btn btn-info">
                    </form>
                </div>
            </div>
        </div>

    </div>


</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/@petfinder/petfinder-js/dist/petfinder.min.js"></script>
<script>
    var pf = new petfinder.Client({apiKey: "cET5qlEkj0mMIFKIFkigu7y5mOk6hBeiYKLzylnaHvleQan7y6", secret: "gq5c8x0leW4pOs65cXuXu3KV6kiCCPvIxLl4K4sM"});
    $('form').submit(function(e){
        e.preventDefault()
        pf.animal.search({
            type:"dog",
            age: $('#age').val(),
            location:$('#location').val(),
            distance:$('#distance').val(),
            status:"adoptable",
            size:$('#size').val()
        }
        )
        .then(function(response){
            console.log(response['data']['animals'])
            $.post({
                data:JSON.stringify(response['data']['animals']),
                url: 'search/',
                success: function(serverresponse){
                    $('html').html(serverresponse)
                }
            })
        }
        )
    })
</script>



{% endblock %}
