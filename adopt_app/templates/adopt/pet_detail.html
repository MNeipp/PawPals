{% extends 'adopt/base3.html' %}}

{% block content %}
    <nav class="navbar navbar-expand-lg navbar-light bg-info">
        <a class="nav-link" href="#"></a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item nav-link "> <a href="#" onclick="history.go(-1)" class="text-dark">< Back to Search</a></li>
            </ul>
        </div>
        <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
            </ul>
            <div class="navbar-nav ml-auto">
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <br><br>
        </div>
        <div class="row">
            <div class="col-md-6 border">
                <div class="col border type">
                    <h2>{{dog.animals.name}}</h2>
                    <h6>{{dog.animals.contact.address.city}}, {{dog.animals.contact.address.state}}</h6>
                </div>
                <div class="col border type">
                    {% if dog.animals.breeds.mixed == True and dog.animals.breeds.secondary == None%}
                    <h6>{{dog.animals.breeds.primary}} Mix</h6>
                    {% elif dog.animals.breeds.secondary == None %}
                    <h6>{{dog.animals.breeds.primary}}</h6>
                    {% else %}
                    <h6>{{dog.animals.breeds.primary}} | {{dog.animals.breed.secondary}} Mix</h6>
                    {% endif %}
                </div>
                <div class="col border type">
                    <h6> {{dog.animals.age}} | {{dog.animals.size}} | {{dog.animals.gender}} </h6>
                </div>
                <div class="col border type">
                    <h6>{{dog.animals.colors.primary}}</h6>
                </div>
                <div class="col border type">
                    <h6>My Info:</h6>
                    {% for k,v in dog.animals.attributes.items %}
                        {% if v == True %}
                        <li>{{k}}</li>
                        {% endif %}
                    {% endfor %}
                    {% for item in dog.animals.environment.items %}
                        {% if v == True %}
                        <li>{{k}}</li>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col border type">
                    <h6>Adoption Info:</h6>
                        <li>{{dog.animals.status|upper}}</li>
                        <li>Waiting for a home since: {{date}}</li>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <br>
                    </div>
                    <div class="col-sm-8">
                        <br><br>
                        <div class="card text-dark border-primary mb-3 text-center">
                            <br>
                            <img class="mx-auto" src="../static/adopt/images/shelter_icon.png" alt="Card image cap" style="width:100px;height:100px;">
                            <div class="card-body">
                                <h5 class="card-title">{{organization.name|upper}}</h5>
                                {% if organization.address.address1 == None %}
                                    <p>Location: <a href="#" class="card-text">{{organization.address.city}}, {{organization.address.state}}</a></p>
                                {% else %}
                                <p>Location: <a href="#" class="card-text">{{organization.address.address1}}
                                    <br> {{organization.address.city}}, {{organization.address.state}}</a></p>
                                {% endif %}
                                {% if organization.phone == None %}
                                <p>Phone: <a href="#" class="card-text">Not Listed</a></p>
                                {% else %}
                                <p>Phone: <a href="#" class="card-text">{{organization.phone}}</a></p>
                                {% endif %}
                                {% if organization.email == None %}
                                <p>Email: <a href="#" class="card-text">Not Listed</a></p>
                                {% else %}
                                <p>Email: <a href="#" class="card-text">{{organization.email}}</a></p>
                                {% endif %}
                                <a href="{% url 'shelter_detail' organization.id %}" class="btn btn-primary">Shelter Details & Contact</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 border">
                <div class="type text-center">
                    <button type="submit" href="#" class="btn btn-outline-info">Ask About Me</button>
                    <button type="submit" href="#" class="btn btn-outline-info">Add Me to Your Favorites</button>
                </div>
                <div>
                    <img src="{{dog.animals.photos.0.full }}" alt="Picture of {{dog.animals.name}}" width="550">
                    <div class="row d-flex justify-content-around">
                        {% if not dog.animals.photos.1.full %}
                        <h5>No Additional Photos Available</h5>
                        {% else %}
                        <img class="img-thumbnail col-4" src="{{dog.animals.photos.1.full}}" alt="">
                        <img class="img-thumbnail col-4" src="{{dog.animals.photos.2.full}}" alt="">
                        <img class="img-thumbnail col-4" src="{{dog.animals.photos.3.full}}" alt="">
                        {% endif %}
                    </div>
                </div>
            </div>
        </div> 
    </div>        

<script>
    fixBrokenImages = function(url){
    var img = document.getElementsByTagName('img');
    var i=0, l=img.length;
    for(;i<l;i++){
        var t = img[i];
        if(t.naturalWidth === 0){
            //this image is broken
            t.src = url;
        }
    }
}

window.onload = function() {
    fixBrokenImages('../static/adopt/images/grey_no_photo.png');
 }
</script>

{% endblock %}}